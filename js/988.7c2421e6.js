"use strict";(globalThis["webpackChunknfp77"]=globalThis["webpackChunknfp77"]||[]).push([[988],{3988:(e,t,a)=>{a.r(t),a.d(t,{default:()=>it});var o=a(3673),l=a(2323);const n={class:"lmm-page"};function i(e,t,a,i,s,r){const c=(0,o.up)("comp-card"),d=(0,o.up)("q-btn"),u=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.cards,(e=>((0,o.wg)(),(0,o.j4)(c,{key:e.id,onClose:()=>r.removeCard(e.id)},null,8,["onClose"])))),128)),(0,o.Wm)(d,{color:"secondary",class:"full-width add_chart",onClick:r.newCard},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("common.add_chart")),1)])),_:1},8,["onClick"])])])),_:1})}const s={class:"row"},r={class:"row q-col-gutter-xl"},c={class:"col-12 col-md-5"},d={class:"col-12 col-md-7"};function u(e,t,a,n,i,u){const p=(0,o.up)("q-tooltip"),m=(0,o.up)("q-icon"),h=(0,o.up)("q-btn"),v=(0,o.up)("q-card-actions"),b=(0,o.up)("series-selector"),f=(0,o.up)("linechart"),g=(0,o.up)("code-popup"),w=(0,o.up)("q-dialog"),y=(0,o.up)("q-card");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(y,{square:"",bordered:"",class:"shadow-1 q-card q-mb-md col-12"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{align:"right",class:"q-pa-none card-action-bar"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{flat:"",onClick:t[0]||(t[0]=e=>i.show_code=!0)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("card.btn_tooltips.code_snippet")),1)])),_:1}),(0,o.Wm)(m,{name:"terminal"})])),_:1}),(0,o.Wm)(h,{flat:"",onClick:t[1]||(t[1]=t=>e.$refs.linechart.downloadChart())},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{name:"ssid_chart"}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("card.btn_tooltips.download_chart")),1)])),_:1})])),_:1}),(0,o.Wm)(h,{onClick:u.closeCard,flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("card.btn_tooltips.close")),1)])),_:1}),(0,o.Wm)(m,{name:"close"})])),_:1},8,["onClick"])])),_:1}),(0,o._)("div",r,[(0,o._)("div",c,[(0,o.Wm)(b,{onSelect:u.onSelect,onChangeMode:t[2]||(t[2]=e=>i.selectedMode=e),colors:i.colors,activeDate:i.activeDate},null,8,["onSelect","colors","activeDate"])]),(0,o._)("div",d,[(0,o.Wm)(f,{series:i.selectedSeries,mode:i.selectedMode,onSetActiveDate:u.onSetActiveDate,colors:i.colors,ref:"linechart"},null,8,["series","mode","onSetActiveDate","colors"]),(0,o.Wm)(w,{modelValue:i.show_code,"onUpdate:modelValue":t[3]||(t[3]=e=>i.show_code=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{series:i.selectedSeries},null,8,["series"])])),_:1},8,["modelValue"])])])])),_:1})])}const p={class:"row"},m={class:"col-12"},h={class:"gt-xs"},v=(0,o.Uk)(" Show Total "),b={class:"row selector"},f={class:"col-12 q-pa-md"};function g(e,t,a,n,i,s){const r=(0,o.up)("q-tab"),c=(0,o.up)("q-tooltip"),d=(0,o.up)("q-toggle"),u=(0,o.up)("q-tabs"),g=(0,o.up)("ch-map"),w=(0,o.up)("list-selector");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",p,[(0,o._)("div",m,[(0,o.Wm)(u,{dense:"",modelValue:i.mode,"onUpdate:modelValue":[t[1]||(t[1]=e=>i.mode=e),s.setMode]},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{name:"canton",label:e.$t("selector.by.canton")},null,8,["label"]),(0,o.Wm)(r,{name:"noga",label:e.$t("selector.by.noga")},null,8,["label"]),(0,o.Wm)(r,{name:"isco",label:e.$t("selector.by.isco")},null,8,["label"]),(0,o.Wm)(d,{color:"deep-purple-10","keep-color":"",modelValue:i.showTotal,"onUpdate:modelValue":t[0]||(t[0]=e=>i.showTotal=e)},{default:(0,o.w5)((()=>[(0,o._)("div",h,(0,l.zw)(e.$t("selector.show_total")),1),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[v])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"])])]),(0,o._)("div",b,[(0,o._)("div",f,["canton"==i.mode?((0,o.wg)(),(0,o.j4)(g,{key:0,onSelect:s.onSelect,colors:a.colors,maxSelections:a.maxSelections,mapData:i.mapData,rangeMin:i.mapRangeMin,rangeMax:i.mapRangeMax,showError:i.mapDataError},null,8,["onSelect","colors","maxSelections","mapData","rangeMin","rangeMax","showError"])):(0,o.kq)("",!0),"noga"==i.mode?((0,o.wg)(),(0,o.j4)(w,{key:1,type:"noga",options:i.nogaOptions,onSelect:s.onSelect,colors:a.colors,maxSelections:a.maxSelections},null,8,["options","onSelect","colors","maxSelections"])):(0,o.kq)("",!0),"isco"==i.mode?((0,o.wg)(),(0,o.j4)(w,{key:2,type:"isco",options:i.iscoOptions,onSelect:s.onSelect,colors:a.colors,maxSelections:a.maxSelections},null,8,["options","onSelect","colors","maxSelections"])):(0,o.kq)("",!0)])])],64)}var w=a(9349),y=a.n(w);const S=e=>{const t=new Date(e),a=t.getMonth()+1,o=t.getDate();return`${t.getFullYear()}-${(a<10?"0":"")+a}-${(o<10?"0":"")+o}`};a(6701);const x=e=>{if(!e.ok)throw new Error(e.statusText);return e},_=e=>fetch(`https://datenservice.kof.ethz.ch/api/v1/public/ts?keys=${e.join(",")}&df=Y-m-d`).then(x).then((e=>e.json())),k={getTimeseries:_};let M;M=k;const C=M,q=[{label:"Aargau",value:"ag"},{label:"Appenzell Innerrhoden",value:"ai"},{label:"Appenzell Ausserrhoden",value:"ar"},{label:"Bern",value:"be"},{label:"Basel-Landschaft",value:"bl"},{label:"Basel-Stadt",value:"bs"},{label:"Fribourg",value:"fr"},{label:"Genève",value:"ge"},{label:"Glarus",value:"gl"},{label:"Grishun",value:"gr"},{label:"Jura",value:"ju"},{label:"Luzern",value:"lu"},{label:"Neuchâtel",value:"ne"},{label:"Nidwalden",value:"nw"},{label:"Obwalden",value:"ow"},{label:"St. Gallen",value:"sg"},{label:"Schaffhausen",value:"sh"},{label:"Solothurn",value:"so"},{label:"Schwyz",value:"sz"},{label:"Thurgau",value:"tg"},{label:"Ticino",value:"ti"},{label:"Uri",value:"ur"},{label:"Vaud",value:"vd"},{label:"Vallais",value:"vs"},{label:"Zug",value:"zg"},{label:"Zürich",value:"zh"}].sort(((e,t)=>e.value>t.value?1:-1)),D=e=>{var t;return(null===(t=q.find((({value:t})=>t==e.toLowerCase())))||void 0===t?void 0:t.label)||void 0},W=q,A=e=>"total"==e.by.value?`ch.kof.jobtracker.total.total.clean.${e.type.value}`.toLowerCase():`ch.kof.jobtracker.${e.by.value}.${e.byvalue.value}.clean.${e.type.value}`.toLowerCase(),$=e=>(Array.isArray(e)||(e=[e]),e.map((e=>A(e))));a(71);const I=(e,t)=>{if(null===t){const a=Object.entries(e).map((([e,t])=>new Date(t[t.length-1].date)));t=Math.max(...a)}const a=S(t),o=Object.keys(e).sort();return W.map(((t,l)=>({name:t.value.toUpperCase(),value:e[o[l]].filter((e=>e.date==a))[0].value})))},Z=e=>{const t=Object.keys(e),a=t.length;let o=new Set;for(const[i,s]of Object.entries(e))s.map((({date:e})=>e)).forEach(o.add,o);let l={};o.forEach((e=>{l[e]=new Array(a).fill(null)}));for(const i in t)e[t[i]].forEach((({date:e,value:t})=>l[e][i]=t));const n=Object.entries(l).sort(((e,t)=>e[0]>t[0]?1:-1)).map((([e,t])=>[e,...t]));return[["date",...t],...n]},O=(e,t)=>{const a=Z(e).slice(1);void 0===t&&(t=a.length);const o=a.slice(a.length-t).map((([e,...t])=>[...t])).flat();return{min:Math.floor(Math.min(...o)),max:Math.ceil(Math.max(...o))}},E=y()("dashboard:backend_ts");let T={};const z=e=>{const t=$(e);E("getting keys: %o",t);const a=Object.keys(T),o=t.filter((e=>a.indexOf(e)<0));return o.length>0?(E("missed cache on %o",o),C.getTimeseries(o).then((e=>(E("api returned data"),T=Object.assign(T,e),j(t))))):(E("all in cache, lucky me!"),j(t))},j=e=>{let t={};return e.forEach((e=>t[e]=T[e])),new Promise(((e,a)=>e(t)))},Q=e=>{const t=W.map((t=>({type:e,by:{label:"Canton",value:"canton"},byvalue:t})));return z(t)},P=(e,t=null)=>Q(e).then((e=>I(e,t))),U=e=>z(e).then(Z);function F(e,t,a,l,n,i){const s=(0,o.up)("e-chart");return(0,o.wg)(),(0,o.j4)(s,{class:"selector-map",autoresize:"","init-options":{renderer:"svg"},option:n.option,"update-options":{replaceMerge:["series"]},onClick:i.onClick,ref:"map"},null,8,["option","onClick"])}var L=a(5416),V=a(763),B=a(8430),R=a(348),N=a(1084);const H={props:{maxSelections:{required:!0},colors:{required:!0}},emits:["select"],data(){return{selection:[],slots:new Array(this.maxSelections).fill(!0)}},methods:{selectItem:function(e){if(this.selection.length==this.maxSelections)this.selection=[...this.selection.slice(0,-1),this.makeSelectionItem(e,this.maxSelections-1)];else{const t=this.slots.indexOf(!0);this.slots[t]=!1,this.selection=[...this.selection,this.makeSelectionItem(e,t)]}this.selection=this.selection.sort(((e,t)=>e.index-t.index))},deselectItem:function(e){const t=this.selection.findIndex((t=>t.byvalue.value==e.byvalue.value)),a=this.selection[t];this.selection=[...this.selection.slice(0,t),...this.selection.slice(t+1)],this.slots[a.index]=!0},toggleItem:function(e){this.selection.findIndex((t=>t.byvalue.value==e.byvalue.value))>=0?this.deselectItem(e):this.selectItem(e)},clearSelection:function(){this.selection=[],this.slots=this.slots.map((()=>!0))},makeSelectionItem:function(e,t){return{index:t,...e}}},watch:{selection:function(){this.$emit("select",[...this.selection])}}},G=H,Y=G;(0,V.D)([B.N,R.N,N.N]);const K={name:"Map",components:{"e-chart":L.ZP},props:{mapData:{required:!0},showError:{required:!1,default:!1},rangeMin:{required:!1,default:0},rangeMax:{required:!1,default:100}},mixins:[Y],mounted(){this.showError&&this.setError()},data(){return{option:{tooltip:{trigger:"item"},geo:{map:"ch",zoom:2.8,left:"60%",top:90,regions:[],emphasis:{label:{show:!1}},tooltip:{formatter:function(e){return D(e.name)}}},visualMap:{left:"center",bottom:0,min:this.rangeMin,max:this.rangeMax,orient:"horizontal",itemHeight:320,text:[],realtime:!0,calculable:!1,inRange:{color:["rgb(254, 126, 14)","rgb(250, 241, 225)","rgb(0, 190, 179)"]}},series:[{type:"map",geoIndex:0,data:this.mapData,selectedMode:!1}]}}},methods:{onClick:function(e){this.toggleItem({by:{label:"Canton",value:"canton"},byvalue:{label:q.filter((({value:t})=>t.toUpperCase()==e.data.name))[0].label,value:e.data.name}})},setError:function(){this.option.graphic={type:"text",left:"center",top:"10%",z:100,style:{fill:"#999",text:"Error while loading data",font:"bold 20px sans-serif"}}}},watch:{selection:function(){const e=this.selection.map((e=>({name:e.byvalue.value,itemStyle:{borderColor:this.colors[e.index],borderWidth:5}})));this.option.geo.regions=e},mapData:function(){this.option.series=[{type:"map",geoIndex:0,data:this.mapData,selectedMode:!1}]},rangeMin:function(){this.option.visualMap.min=this.rangeMin},rangeMax:function(){this.option.visualMap.max=this.rangeMax},showError:function(){this.showError&&this.setError()}}};var J=a(4260);const X=(0,J.Z)(K,[["render",F]]),ee=X;function te(e,t,a,n,i,s){const r=(0,o.up)("q-select"),c=(0,o.up)("q-avatar"),d=(0,o.up)("q-item-section"),u=(0,o.up)("q-btn"),p=(0,o.up)("q-item"),m=(0,o.up)("q-list");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r,{dense:"",square:"",outlined:"",label:"noga"==a.type?e.$t("selector.dropdowns.industry"):e.$t("selector.dropdowns.occupation"),modelValue:i.model,"onUpdate:modelValue":[t[0]||(t[0]=e=>i.model=e),s.onSelect],"use-input":"",onFilter:s.filterFn,options:s.availableOptions},null,8,["label","modelValue","onFilter","options","onUpdate:modelValue"]),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.selection,(t=>((0,o.wg)(),(0,o.j4)(p,{key:t.byvalue},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{size:"md",style:(0,l.j5)({backgroundColor:e.colors[t.index]})},null,8,["style"])])),_:2},1024),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(t.byvalue.label),1)])),_:2},1024),(0,o.Wm)(d,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{flat:"",dense:"",icon:"close",onClick:()=>e.deselectItem(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])}const ae={name:"ListSelector",mixins:[Y],props:{type:{required:!0},options:{required:!0}},data(){return{model:null,activeOptions:this.options,maxSelect:3}},computed:{availableOptions:function(){return this.activeOptions.filter((e=>this.selection.map((e=>e.byvalue.value)).indexOf(e.value)<0))}},methods:{onSelect:function(e){this.selectItem({by:{label:"noga"==this.type?"Sector":"Occupation",value:this.type},byvalue:{...e}}),this.model=null},filterFn:function(e,t){t((()=>{this.activeOptions=this.options.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>=0))}))}}};var oe=a(6118),le=a(7011),ne=a(3414),ie=a(2035),se=a(5096),re=a(8240),ce=a(7518),de=a.n(ce);const ue=(0,J.Z)(ae,[["render",te]]),pe=ue;de()(ae,"components",{QSelect:oe.Z,QList:le.Z,QItem:ne.Z,QItemSection:ie.Z,QAvatar:se.Z,QBtn:re.Z});const me=[{value:"ab",label:"A/B - Agriculture and Mining"},{value:"c",label:"C - Manufacturing"},{value:"d",label:"D - Electricity, Gas, Steam and Air-Conditioning Supply"},{value:"e",label:"E - Water Supply; Sewerage, Waste Management and Remediation Activities"},{value:"f",label:"F - Construction"},{value:"g",label:"G - Wholesale and Retail Trade; Repair of Motor Vehicles and Motorcycles"},{value:"h",label:"H - Transportation and Storage"},{value:"i",label:"I - Accommodation and Food Service Activities"},{value:"j",label:"J - Information and Communication"},{value:"k",label:"K - Financial and Insurance Activities"},{value:"l",label:"L - Real Estate Activities"},{value:"m",label:"M - Professional, Scientific and Technical Activities"},{value:"n",label:"N - Administrative and Support Service Activities"},{value:"o",label:"O - Public Administration and Defence; Compulsory Social Security"},{value:"p",label:"P - Education"},{value:"q",label:"Q - Human Health and Social Work Activities"},{value:"r",label:"R - Arts, Entertainment and Recreation"},{value:"st",label:"S/T - Activities of Households, Other Services"}],he=[{label:"Managers",value:1},{label:"Professionals",value:2},{label:"Technicians and associate professionals",value:3},{label:"Clerical support workers",value:4},{label:"Service and sales workers",value:5},{label:"Skilled agricultural, forestry and fishery workers",value:6},{label:"Craft and related trades workers",value:7},{label:"Plant and machine operators and assemblers",value:8},{label:"Elementary occupations",value:9}],ve=[{label:"CH Labor Market Index",value:"idx"},{label:"Mean Ad Lifetime",value:"t"}],be={name:"SeriesSelector",props:{maxSelections:{required:!1,default:3},colors:{required:!0},activeDate:{required:!1,default:null}},components:{"ch-map":ee,"list-selector":pe},emits:["select","changeMode"],mounted(){this.emitSelection(),this.emitMode(),this.updateMap()},data(){return{mapData:null,mapDataError:!1,mapRangeMin:0,mapRangeMax:100,showTotal:!0,selection:[],mode:"canton",indexOptions:ve,selectedIndex:ve[0],nogaOptions:me,iscoOptions:he}},methods:{setMode:function(e){this.clearSelection(),this.emitMode()},clearSelection:function(){this.onSelect([])},onSelect:function(e){this.selection=e,this.emitSelection()},emitSelection:function(){const e=this.selection.map((e=>({...e,type:this.selectedIndex})));this.showTotal&&e.push({index:this.maxSelections,type:this.selectedIndex,by:{label:"Total",value:"total"},byvalue:{label:"Total",value:"total"}}),this.$emit("select",e)},emitMode:function(){this.$emit("changeMode",this.mode)},updateMap:function(){P(this.selectedIndex,this.activeDate).then((e=>{this.mapData=e})).catch((e=>{this.mapDataError=!0})),Q(this.selectedIndex).then(O).then((({min:e,max:t})=>{this.mapRangeMin=e,this.mapRangeMax=t})).catch((e=>{this.mapDataError=!0}))}},watch:{showTotal:function(){this.emitSelection()},selectedIndex:function(){this.emitSelection()},activeDate:function(){this.updateMap()},mode:function(e,t){e!=t&&this.clearSelection()}}};var fe=a(7547),ge=a(8408),we=a(2582),ye=a(8870);const Se=(0,J.Z)(be,[["render",g],["__scopeId","data-v-abb5b91a"]]),xe=Se;de()(be,"components",{QTabs:fe.Z,QTab:ge.Z,QToggle:we.Z,QTooltip:ye.Z});const _e={class:"chart-title"},ke={class:"chart-title"},Me={align:"right",class:"q-mr-md q-mb-sm"};function Ce(e,t,a,n,i,s){const r=(0,o.up)("e-chart");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",_e,(0,l.zw)(e.$t("graphs.line_chart.title")),1),(0,o._)("div",ke,(0,l.zw)(e.$t("graphs.line_chart.subtitle",{displayMode:s.displayMode})),1),(0,o._)("div",null,[(0,o.Wm)(r,{autoresize:"",option:i.lines,"update-options":{replaceMerge:["series","graphic"]},loading:i.loading,onUpdateAxisPointer:s.onUpdateAxisPointer,"onZr:click":s.onClick,ref:"chart"},null,8,["option","loading","onUpdateAxisPointer","onZr:click"]),(0,o.Wm)(r,{class:"offscreen",ref:"dlchart",option:i.offScreenOptions},null,8,["option"]),(0,o._)("div",Me,(0,l.zw)(e.$t("graphs.line_chart.source")),1)])])}a(812),a(6105),a(5123),a(8836),a(8685),a(2396),a(9802),a(2773);var qe=a(3526),De=a(9931),We=a(187),Ae=a(2826),$e=a(546),Ie=a(4981),Ze=a(7714);(0,V.D)([qe.N,De.N,We.N,Ae.N,$e.N,Ie.N,Ze.N]);const Oe=20,Ee={name:"lineChart",components:{"e-chart":L.ZP},props:{mode:{required:!0},series:{required:!0},colors:{required:!0}},emits:["setActiveDate"],mounted(){this.update()},data(){return{offScreenOptions:{},loading:!1,lines:{grid:{top:15,left:window.innerWidth<670?8:0,bottom:window.innerWidth<670?8:15,right:window.innerWidth<670?8:"10%",containLabel:!0},xAxis:{type:"time",maxInterval:314496e5,minInterval:314496e5,axisLabel:{showMinLabel:!0,formatter:"{MMM} {yearStyle|{yyyy}}",rich:{yearStyle:{fontWeight:"bold"}}}},yAxis:{type:"value",min:function({min:e}){return Oe*Math.floor(e/Oe)},max:function({max:e}){return Oe*Math.ceil(e/Oe)},interval:Oe},series:[],tooltip:{show:!0,valueFormatter:e=>e.toFixed(2),trigger:"axis"}},activeDate:null}},computed:{displayMode:function(){const e={canton:"canton",noga:"industry",isco:"occupation"};return e[this.mode]}},watch:{series:{handler:function(){this.update()},deep:!0}},methods:{update:function(){this.loading=!0,U(this.series).then((e=>{const t=e[0].length-1;this.lines={graphic:null,series:Array.from({length:t}).map(((t,a)=>({type:"line",lineStyle:{width:3},showSymbol:!1,color:this.colors[this.series[a].index],name:this.series[a].byvalue.label,data:e.slice(1).map((e=>[e[0],e[a+1]]))})))},this.loading=!1})).catch((e=>{this.loading=!1,this.lines={graphic:{type:"text",left:"center",top:"center",z:100,style:{fill:"#999",text:"Error while loading data",font:"bold 20px sans-serif"}}}}))},onUpdateAxisPointer:function(e){e.axesInfo&&e.axesInfo[0]&&e.axesInfo[0].value&&(this.activeDate=e.axesInfo[0].value)},downloadChart(){let e=this.$refs.chart.getOption();e.series=e.series.map((e=>({...e,animation:!1}))),e.title={text:this.$t("graphs.line_chart.title"),subtext:this.$t("graphs.line_chart.subtitle",{displayMode:this.displayMode})},e.grid[0].top=65,e.grid[0].bottom=70,e.grid[0].left="7%",e.grid[0].right="7%",e.graphic=[{type:"text",right:5,bottom:5,z:100,style:{fill:"#000",text:this.$t("graphs.line_chart.source")}}],e.legend={type:"plain",icon:"rect",top:"bottom"},this.offScreenOptions=e,window.setTimeout((()=>{const e=this.$refs.dlchart.getDataURL({backgroundColor:"#fff"}),t="swissjobtracker_export_"+Date.now()+".png";if(window.navigator&&window.navigator.msSaveOrOpenBlob){const a=e.split(",")[1],o=atob(a),l=new Uint8Array(new Array(o.length).fill(0).map(((e,t)=>o.charCodeAt(t)))),n=new Blob([l],{type:"image/png"});window.navigator.msSaveOrOpenBlob(n,t)}else{const a=document.createElement("a");a.href=e,a.download=t,a.click(),a.remove()}}),500)},onClick:function(){this.$emit("setActiveDate",new Date(this.activeDate))}}},Te=(0,J.Z)(Ee,[["render",Ce],["__scopeId","data-v-31bb97bb"]]),ze=Te,je={class:"text-h6"},Qe=["innerHTML"];function Pe(e,t,a,n,i,s){const r=(0,o.up)("q-space"),c=(0,o.up)("q-btn"),d=(0,o.up)("q-card-section"),u=(0,o.up)("q-tooltip"),p=(0,o.up)("q-card-actions"),m=(0,o.up)("q-card"),h=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"row items-center q-pb-none"},{default:(0,o.w5)((()=>[(0,o._)("div",je,(0,l.zw)(e.$t("copy_code.title")),1),(0,o.Wm)(r),(0,o.wy)((0,o.Wm)(c,{icon:"close",flat:"",dense:""},null,512),[[h]])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o._)("div",{innerHTML:s.createSnippet(a.series),id:"code_snippet"},null,8,Qe)])),_:1}),(0,o.Wm)(p,{align:"right"},{default:(0,o.w5)((()=>[!s.copyPossible&&s.selectionPossible?((0,o.wg)(),(0,o.j4)(c,{key:0,dense:"",flat:"",onClick:s.handleSelectAll,icon:"select_all"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("copy_code.select_button")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0),s.copyPossible?((0,o.wg)(),(0,o.j4)(c,{key:1,dense:"",flat:"",onClick:s.handleCopy,icon:"content_copy"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("copy_code.copy_button")),1)])),_:1})])),_:1},8,["onClick"])):(0,o.kq)("",!0)])),_:1})])),_:1})}const Ue=e=>`<div class="code">library(kofdata)<br />\ntsl <- get_time_series(c(<br />\n  ${$(e).map((e=>`<span class="snippet-string">'${e}'</span>`)).join(",\n<br />  ")}<br />\n))<br />\ntsl</div>`,Fe=e=>{const t=document.getElementById(e).textContent;return navigator&&navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t):Promise.reject("Error while copying. Please copy and paste code manually.")},Le={name:"code-popup",props:["series"],methods:{handleCopy:function(){Fe("code_snippet").then((()=>{this.$q.notify({message:this.$t("copy_code.success"),color:"positive",position:"top",timeout:1e3})})).catch((e=>{this.$q.notify({message:this.$t("copy_code.error"),color:"negative",position:"top",timeout:2e3})}))},handleSelectAll:function(e){e.preventDefault(),window.getSelection?window.getSelection().selectAllChildren(document.getElementById("code_snippet")):this.$q.notify({message:this.$t("copy_code.select_error"),color:"negative",position:"top",timeout:2e3})},createSnippet:Ue,copySnippet:Fe},computed:{selectionPossible(){return void 0!==window.getSelection},copyPossible(){return navigator&&navigator.clipboard&&navigator.clipboard.writeText&&!0}}};var Ve=a(151),Be=a(5589),Re=a(2025),Ne=a(9367),He=a(677);const Ge=(0,J.Z)(Le,[["render",Pe]]),Ye=Ge;de()(Le,"components",{QCard:Ve.Z,QCardSection:Be.Z,QSpace:Re.Z,QBtn:re.Z,QCardActions:Ne.Z,QTooltip:ye.Z}),de()(Le,"directives",{ClosePopup:He.Z});const Ke={name:"comp-card",components:{linechart:ze,"series-selector":xe,codePopup:Ye},emits:["close"],data(){return{show_code:!1,activeDate:null,selectedSeries:[],selectedMode:"canton",colors:["#31688EFF","#35B779FF","#FDE725FF","#440154FF"]}},methods:{onSelect:function(e){this.selectedSeries=e},closeCard:function(){this.$emit("close")},onSetActiveDate:function(e){this.activeDate=e}}};var Je=a(4554),Xe=a(5926);const et=(0,J.Z)(Ke,[["render",u],["__scopeId","data-v-6b3373ce"]]),tt=et;de()(Ke,"components",{QCard:Ve.Z,QCardActions:Ne.Z,QBtn:re.Z,QTooltip:ye.Z,QIcon:Je.Z,QDialog:Xe.Z});var at=a(4259);const ot={name:"PageIndex",components:{"comp-card":tt},mounted(){},data(){return{cards:[{id:(0,at.Z)()}]}},methods:{newCard:function(){this.cards.push({id:(0,at.Z)()})},removeCard:function(e){this.cards=this.cards.filter((t=>t.id!=e))}}};var lt=a(4379);const nt=(0,J.Z)(ot,[["render",i]]),it=nt;de()(ot,"components",{QPage:lt.Z,QBtn:re.Z})}}]);